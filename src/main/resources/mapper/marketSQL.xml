<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="market">
	<select id="selectOne" parameterType="_int" resultType="md">
		select
			mt.market_no as marketNo,
			mt.age,
			mt.type_code as typeCode,
			mt.sale_info as saleInfo,
			mt.gender,
			dt.type_size as typeSize,
			dt.type_name as typeName,
			mt.price
		from market_tbl mt join dog_type dt on(mt.type_code=dt.type_code)
		where market_no = #{_parameter}
	</select>
	<select id="marketListCnt" parameterType="md" resultType="int">
		select count(type_code)
		
		from market_tbl join dog_type using(type_code)
		<choose>
		<when test="typeSize==-1">
		</when>
		<otherwise>
		where type_size = #{typeSize}
		</otherwise>
		</choose>
	</select>
	<select id="filterSelect" parameterType="md" resultType="md">
		select
			mt.market_no as marketNo,
			mt.age,
			mt.type_code as typeCode,
			mt.sale_info as saleInfo,
			mt.gender,
			dt.type_size as typeSize,
			dt.type_name as typeName,
			mt.price
		from market_tbl mt join dog_type dt on(mt.type_code=dt.type_code)
		<choose>
		<when test="typeSize==-1">
		</when>
		<otherwise>
		where type_size = #{typeSize}
		</otherwise>
		</choose>		
	</select>	
	<insert id="inputMarket">
		insert into market_file_tbl values(
		#{marketNo},
		#{fileName},
		#{filePath}
		)
	</insert>
	<select id="selectTypeList" resultType="dt">
		select
			type_code as typeCode,
			type_name as typeName,
			type_size as typeSize
		from dog_type
	</select>
</mapper>
